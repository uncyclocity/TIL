# 09. 스코프

> References <br> <a href="http://www.yes24.com/Product/Goods/92742567?OzSrank=1">모던 자바스크립트 Deep Dive</a> _.이웅모_

## 1. 스코프의 기본 개념

- **스코프**는 **식별자의 유효 범위**를 말한다.
- **식별자가 선언 된 위치**에 따라 **지역 스코프**과 **전역 스코프**으로 나눌 수 있다.
- 식별자가 **함수에 의해 생성**되는가 혹은 **모든 코드블럭에 의해 생성**되는가에 따라 각각 **함수 레벨 스코프**와 **블록 레벨 스코프**로 나눌 수 있다.
- 함수의 경우, 상위 스코프가 결정되는 방식에 따라 **동적 스코프**와 **정적 스코프(렉시컬 스코프)**로 나눌 수 있다.

## 2. 지역과 전역 스코프

```javascript
// 전역 변수
const a = 1;
const sample = () => {
  //지역 변수
  const a = 2;
  console.log(a); // 2
};
console.log(a); // 1
```

- **지역 스코프**는 **지역(함수 몸체 내부)**에 선언되어 **해당 지역 및 하위 스코프에서만 호출이 가능**한 식별자가 해당된다. <br>
  👉 지역 내부에서만 호출이 가능하다.
- **전역 스코프**는 **전역**에 선언되어 **어디서든지 호출이 가능**한 식별자가 해당된다.

## 3. 스코프 체인

- 스코프는 **함수의 중첩**으로 이루어진다.
- **최상위 스코프(전역)에서부터 최하위 스코프(중첩의 마지막 단계)까지의 계층 관계**를 **스코프 체인**이라고 한다.
- 식별자를 호출하면, 해당 함수에서부터 스코프 체인에 의해 **차례대로 상위 스코프로 올라가서 해당 식별자를 검색**한다.

## 4. 함수 레벨과 블록 레벨 스코프

- 블록 레벨 스코프를 따르는 C, Java와는 달리, JS는 기본적으로 **함수 레벨 스코프**이다.

  ```javascript
  var a = 1;

  if (true) {
    var a = 2;
  }

  console.log(a); // 2, 같은 함수 내에서는 블록이 중첩되어 내부에 선언된 식별자이더라도 블록 밖에서 호출이 가능하다.
  ```

- **let, const**로 선언한 변수는 **블록 레벨 스코프**가 적용된다.

  ```javascript
  const a = 1;

  if (true) {
    const a = 2;
  }

  console.log(a); // 1, 같은 함수 안이더라도 중첩된 블록 내부에서 선언한 식별자는 내부에서만 호출이 가능하다.
  ```

## 5. 동적과 정적(렉시컬) 스코프

```javascript
var a = 1;

function foo() {
  var a = 10;
  bar();
}

function bar() {
  console.log(a);
}

foo();
```

- **동적 스코프**의 경우, 함수가 호출 된 시점에 따라 상위 스코프가 결정된다. <br>
  👉 foo 함수 내부에 호출 된 bar의 경우, 상위스코프는 **foo 함수**가 된다.
- **정적 스코프(렉시컬 스코프)**의 경우, 선언 된 시점에 따라 상위 스코프가 결정된다. <br>
  👉 foo 함수 내부에 호출 된 bar이더라도, 선언 된 시점은 전역이기 때문에 상위 스코프는 **전역**이 된다.
